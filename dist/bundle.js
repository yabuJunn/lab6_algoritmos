(()=>{"use strict";var e;!function(e){e.ADD_EPISODES="ADD_EPISODES",e.ADD_CHARACTER="ADD_CHARACTER"}(e||(e={}));const t=[];let n={episodes:[],characters:[]};const o=o=>{const i=JSON.parse(JSON.stringify(n));n=((t,n)=>{switch(t.type){case e.ADD_EPISODES:return Object.assign(Object.assign({},n),{episodes:JSON.parse(t.payload)});case e.ADD_CHARACTER:return Object.assign(Object.assign({},n),{characters:JSON.parse(t.payload)});default:return n}})(o,i),t.forEach((e=>e.render())),console.log(n)};const i=e=>{return t=void 0,n=void 0,i=function*(){const t=yield fetch(e),n=yield t.json();return n.hasOwnProperty("results")?n.results:n},new((o=void 0)||(o=Promise))((function(e,s){function r(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(r,a)}c((i=i.apply(t,n||[])).next())}));var t,n,o,i};var s=function(e,t,n,o){return new(n||(n=Promise))((function(i,s){function r(e){try{c(o.next(e))}catch(e){s(e)}}function a(e){try{c(o.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}c((o=o.apply(e,t||[])).next())}))};const r=e=>{const t=[];return e.forEach((e=>s(void 0,void 0,void 0,(function*(){e.characters.forEach((e=>s(void 0,void 0,void 0,(function*(){t.includes(e)||t.push(e)}))))})))),t},a=e=>s(void 0,void 0,void 0,(function*(){const t=[];return e.forEach((e=>s(void 0,void 0,void 0,(function*(){t.push(yield i(e))})))),t}));class c extends HTMLElement{static get observedAttributes(){return Object.keys({name:null,air_date:null,characters:null,episode:null})}constructor(){super(),this.properties={name:"",air_date:"",characters:"",episode:""},this.attachShadow({mode:"open"})}attributeChangedCallback(e,t,n){switch(e){case"name":this.properties.name=n;break;case"air_date":this.properties.air_date=n;break;case"characters":this.properties.characters=n;break;case"episode":this.properties.episode=n}}connectedCallback(){this.render()}render(){var e,t;const n=this.ownerDocument.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("href","/src/components/episodeCard/episodeCard.css"),null===(e=this.shadowRoot)||void 0===e||e.appendChild(n);const o=this.ownerDocument.createElement("div");o.setAttribute("class","episodeCard"),null===(t=this.shadowRoot)||void 0===t||t.appendChild(o);const i=this.ownerDocument.createElement("h1");i.textContent=this.properties.name,o.appendChild(i);const s=this.ownerDocument.createElement("h2");s.textContent=`Serial: ${this.properties.episode}`,o.appendChild(s);const r=this.ownerDocument.createElement("p");r.textContent=`This episode was aired on ${this.properties.air_date}`,o.appendChild(r);const a=this.ownerDocument.createElement("p");a.textContent=this.properties.characters,o.appendChild(a)}}customElements.define("episode-card",c);s(void 0,void 0,void 0,(function*(){const t=yield i("https://rickandmortyapi.com/api/episode");var n;o((n=JSON.stringify(t),{type:e.ADD_EPISODES,payload:n}));const c=yield(e=>s(void 0,void 0,void 0,(function*(){const t=r(e);return a(t)})))(t);setTimeout((()=>{(t=>{s(void 0,void 0,void 0,(function*(){var n;o((n=JSON.stringify(t),{type:e.ADD_CHARACTER,payload:n}))}))})(c)}),500)}));class d extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),t.push(this)}connectedCallback(){this.render()}render(){var e,t,o,i,s;return t=this,o=void 0,s=function*(){if(this.shadowRoot){this.innerHTML="";const t=this.ownerDocument.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href","/src/index.css"),null===(e=this.shadowRoot)||void 0===e||e.appendChild(t),null===n.episodes?this.ownerDocument.createElement("h1").textContent="LOADING...":n.episodes.forEach((e=>{var t;const n=this.ownerDocument.createElement("episode-card");n.setAttribute("name",`${e.name}`),n.setAttribute("air_date",`${e.air_date}`),n.setAttribute("episode",`${e.episode}`),null===(t=this.shadowRoot)||void 0===t||t.appendChild(n)}))}},new((i=void 0)||(i=Promise))((function(e,n){function r(e){try{c(s.next(e))}catch(e){n(e)}}function a(e){try{c(s.throw(e))}catch(e){n(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(r,a)}c((s=s.apply(t,o||[])).next())}))}}customElements.define("app-container",d)})();